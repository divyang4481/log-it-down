/**
 * logItDown v0.1.1
 *
 * Copyright 2014 Transferwise Ltd
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){"use strict";angular.module("logItDown",[]).config(["$provide",function(a){a.decorator("$log",["$delegate","logCollector",function(a,b){return{log:function(){a.log.apply(null,arguments),b.log.apply(null,arguments)},info:function(){a.info.apply(null,arguments),b.info.apply(null,arguments)},debug:function(){a.debug.apply(null,arguments),b.debug.apply(null,arguments)},warn:function(){a.warn.apply(null,arguments),b.warn.apply(null,arguments)},error:function(){a.error.apply(null,arguments),b.error.apply(null,arguments)}}}]),a.decorator("$exceptionHandler",["$delegate","logCollector",function(a,b){return function(c,d){a(c,d),b.error.apply(null,c.message)}}])}]),angular.module("logItDown").service("logCollector",["$filter",function(a){var b=[],c=100;this.log=function(){d(arguments,"LOG")},this.info=function(){d(arguments,"INFO")},this.debug=function(){d(arguments,"DEBUG")},this.warn=function(){d(arguments,"WARN")},this.error=function(){d(arguments,"ERROR")},this.setHistoryLimit=function(a){c=a},this.getHistoryAsString=function(a,b){return j(this.getHistory(a,b))},this.getHistory=function(a,c){var d=h(c);return a===!0&&(b=[]),d};var d=function(a,d){b.push({time:f(),type:d,message:e(a)}),b.length>c&&b.shift()},e=function(a){for(var b=[],c=0;c<a.length;c++){if(a[c]instanceof Error){b.push(a[c].message);break}b.push("object"==typeof a[c]?JSON.stringify(a[c]):a[c])}return b.join("\n")},f=function(){return a("date")(new Date,"HH:mm:ss.sss dd-MM-yyyy")},g=function(a){return 3===a.length?"  "+a+" ":4===a.length?" "+a+" ":a+" "},h=function(a){var c=[];a=i(a);for(var d=b.length-1;d>=a;d--)c.push(b[d]);return c},i=function(a){return a=!isNaN(a)&&a>0&&a<=b.length?a:b.length,b.length-a},j=function(a){for(var b="",c=0;c<a.length;c++)b+=k(a[c])+"\n";return b},k=function(a){return a.time+" "+g(a.type)+" "+a.message}}])}();