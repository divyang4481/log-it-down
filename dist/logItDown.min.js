/**
 * logItDown v0.1.0
 *
 * Copyright 2014 Transferwise Ltd
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){"use strict";angular.module("logItDown",[]).config(["$provide",function(a){a.decorator("$log",["$delegate","logCollector",function(a,b){return{log:function(){a.log.apply(null,arguments),b.log.apply(null,arguments)},info:function(){a.info.apply(null,arguments),b.info.apply(null,arguments)},debug:function(){a.debug.apply(null,arguments),b.debug.apply(null,arguments)},warn:function(){a.warn.apply(null,arguments),b.warn.apply(null,arguments)},error:function(){a.error.apply(null,arguments),b.error.apply(null,arguments)}}}]),a.decorator("$exceptionHandler",["$delegate","logCollector",function(a,b){return function(c,d){a(c,d),b.error.apply(null,c.message)}}])}]),angular.module("logItDown").service("logCollector",["$filter",function(a){var b=[];this.log=function(){c(arguments,"LOG")},this.info=function(){c(arguments,"INFO")},this.debug=function(){c(arguments,"DEBUG")},this.warn=function(){c(arguments,"WARN")},this.error=function(){c(arguments,"ERROR")},this.getHistory=function(a,c){var d=g(c);return a===!0&&(b=[]),d},this.getHistoryAsString=function(a,b){return i(g(b,a))};var c=function(a,c){b.push({time:e(),type:c,message:d(a)})},d=function(a){var b=[];return angular.forEach(a,function(a){"object"==typeof a&&(a=JSON.stringify(a)),b.push(a)}),b.join("\n")},e=function(){return a("date")(new Date,"HH:mm:ss.sss dd-MM-yyyy")},f=function(a){return 3===a.length?"  "+a+" ":4===a.length?" "+a+" ":a+" "},g=function(a){var c=[];a=h(a);for(var d=b.length-1;d>=a;d--)c.push(b[d]);return c},h=function(a){return a=!isNaN(a)&&a>0&&a<=b.length?a:b.length,b.length-a},i=function(a){for(var b="",c=0;c<a.length;c++)b+=j(a[c])+"\n";return b},j=function(a){return a.time+" "+f(a.type)+" "+a.message}}])}();